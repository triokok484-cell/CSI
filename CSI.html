<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în t·∫≠p Khoa h·ªçc M√°y t√≠nh - CSI106</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --success-color: #7ed321;
            --danger-color: #d0021b;
            --light-color: #f9f9f9;
            --dark-color: #4a4a4a;
            --background-color: #ffffff;
            --font-color: #333;
            --border-color: #e0e0e0;
            --border-radius: 8px;
            --box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.7;
            background: linear-gradient(to right top, #f5f7fa, #ffffff);
            color: var(--font-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            background-color: var(--background-color);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 800px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 25px;
        }
        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 2rem;
            font-weight: 700;
        }
        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
        }
        .tab-button {
            padding: 12px 25px;
            border: none;
            background-color: transparent;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
            transition: all 0.3s ease;
            margin-bottom: -1px;
        }
        .tab-button.active, .tab-button:hover {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .btn {
            padding: 10px 20px;
            border: none;
            background-color: var(--primary-color);
            color: white;
            cursor: pointer;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .btn-secondary { background-color: #6c757d; }
        .btn-danger { background-color: var(--danger-color); }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        #theory-summary {
            background-color: #fdfdff;
            padding: 20px;
            border-radius: var(--border-radius);
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
        }
        #theory-summary p { margin: 0 0 12px 0; border-left: 4px solid var(--secondary-color); padding-left: 15px; }
        #theory-summary span { font-weight: 600; color: var(--primary-color); }

        #quiz-setup { text-align: center; padding: 30px 0; }
        #quiz-setup h3 { margin-top: 0; margin-bottom: 20px; }
        #num-questions-input {
            padding: 10px;
            font-size: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            width: 80px;
            text-align: center;
            margin-right: 10px;
        }

        #quiz-container { text-align: center; }
        #progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 10px;
        }
        #progress-bar {
            width: 0%;
            height: 10px;
            background-color: var(--secondary-color);
            border-radius: var(--border-radius);
            transition: width 0.5s ease;
        }
        #question-text { font-size: 1.5rem; margin-bottom: 25px; font-weight: 500; }
        #answers-container { display: flex; flex-direction: column; gap: 12px; }
        .answer-btn {
            display: flex;
            align-items: center;
            width: 100%;
            text-align: left;
            padding: 15px;
            background-color: var(--background-color);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .answer-btn:hover:not(:disabled) {
            border-color: var(--primary-color);
            transform: scale(1.02);
        }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.8; }
        .answer-btn.correct, .answer-btn.incorrect { transform: scale(1); }
        .answer-btn.correct { border-color: var(--success-color); background-color: #f0fff4; }
        .answer-btn.incorrect { border-color: var(--danger-color); background-color: #fff5f5; }
        .answer-btn .icon {
            font-size: 1.5rem;
            margin-left: auto;
            font-style: normal;
        }
        
        #quiz-footer {
            margin-top: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #memory-tip {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: var(--border-radius);
            color: #856404;
            text-align: left;
        }
        
        #results-container h2 { text-align: center; }
        #score { font-size: 2.2rem; font-weight: bold; color: var(--primary-color); }
        #results-list { list-style-type: none; padding: 0; }
        #results-list li {
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        .result-correct { border-left: 5px solid var(--success-color); background-color: #f7fff9; }
        .result-incorrect { border-left: 5px solid var(--danger-color); background-color: #fffafa; }
        .result-question { font-weight: 600; }
        .result-answer { margin-top: 8px; font-size: 0.95rem; }
        .result-tip { margin-top: 10px; font-size: 0.9rem; font-style: italic; color: #555; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>√în t·∫≠p CSI106</h1>
        <button id="lang-toggle-btn" class="btn btn-secondary">Translate to English</button>
    </header>

    <div class="tabs">
        <button id="theory-tab-btn" class="tab-button active" onclick="switchTab('theory')">L√Ω Thuy·∫øt</button>
        <button id="quiz-tab-btn" class="tab-button" onclick="switchTab('quiz')">L√†m Quiz</button>
    </div>

    <div id="theory-content" class="tab-content active">
        <h2 id="theory-title">T√≥m T·∫Øt L√Ω Thuy·∫øt C·ªët L√µi</h2>
        <div id="theory-summary"></div>
    </div>

    <div id="quiz-content" class="tab-content">
        <div id="quiz-setup">
            <h3 id="quiz-setup-title">Nh·∫≠p s·ªë c√¢u h·ªèi b·∫°n mu·ªën l√†m:</h3>
            <input type="number" id="num-questions-input" min="1" max="182" value="10">
            <button id="start-quiz-btn" class="btn" onclick="startQuiz()">B·∫Øt ƒë·∫ßu</button>
        </div>

        <div id="quiz-container" style="display: none;">
            <div id="progress-bar-container"><div id="progress-bar"></div></div>
            <p id="progress-text"></p>
            <div id="question-text"></div>
            <div id="answers-container"></div>
            <div id="memory-tip" style="display: none;"></div>
            <div id="quiz-footer">
                <button id="submit-btn" class="btn btn-danger" onclick="submitQuiz()">N·ªôp b√†i</button>
                <button id="next-btn" class="btn" onclick="nextQuestion()" style="display: none;">C√¢u Ti·∫øp Theo</button>
            </div>
        </div>

        <div id="results-container" style="display: none;">
            <h2 id="results-title">K·∫øt qu·∫£</h2>
            <p id="score" style="text-align: center;"></p>
            <ul id="results-list"></ul>
            <div style="text-align: center; margin-top: 20px;">
                <button id="restart-btn" class="btn" onclick="restartQuiz()">L√†m l·∫°i</button>
            </div>
        </div>
    </div>
</div>

<script>
// --- START OF QUESTION BANK (FULL 182 QUESTIONS) ---
const mcqBank = [
    // --- Ph·∫ßn 1 ---
    {"id":1,"question_vi":"M·ªôt gi·∫£i ph√°p t·ª´ng b∆∞·ªõc cho m·ªôt v·∫•n ƒë·ªÅ ƒë∆∞·ª£c g·ªçi l√† _______.","question_en":"A step-by-step solution to a problem is called _______.","answers_vi":[{"text":"ph·∫ßn c·ª©ng","correct":false},{"text":"m·ªôt h·ªá ƒëi·ªÅu h√†nh","correct":false},{"text":"m·ªôt ng√¥n ng·ªØ m√°y t√≠nh","correct":false},{"text":"m·ªôt thu·∫≠t to√°n","correct":true}],"answers_en":[{"text":"hardware","correct":false},{"text":"an operating system","correct":false},{"text":"a computer language","correct":false},{"text":"an algorithm","correct":true}],"tip_vi":"Thu·∫≠t to√°n (Algorithm) l√† m·ªôt chu·ªói c√°c h∆∞·ªõng d·∫´n ho·∫∑c quy t·∫Øc ƒë∆∞·ª£c x√°c ƒë·ªãnh r√µ r√†ng ƒë·ªÉ gi·∫£i quy·∫øt m·ªôt v·∫•n ƒë·ªÅ c·ª• th·ªÉ.","tip_en":"An Algorithm is a sequence of well-defined instructions or rules to solve a specific problem."},
    {"id":2,"question_vi":"M√¥ h√¨nh _______ l√† c∆° s·ªü cho c√°c m√°y t√≠nh ng√†y nay.","question_en":"The _______ model is the basis for today's computers.","answers_vi":[{"text":"Leibnitz","correct":false},{"text":"von Neumann","correct":true},{"text":"Pascal","correct":false},{"text":"Charles Babbage","correct":false}],"answers_en":[{"text":"Leibnitz","correct":false},{"text":"von Neumann","correct":true},{"text":"Pascal","correct":false},{"text":"Charles Babbage","correct":false}],"tip_vi":"Ki·∫øn tr√∫c von Neumann m√¥ t·∫£ m·ªôt m√°y t√≠nh c√≥ th·ªÉ l∆∞u tr·ªØ ch∆∞∆°ng tr√¨nh v√† d·ªØ li·ªáu trong c√πng m·ªôt b·ªô nh·ªõ, ƒë√¢y l√† n·ªÅn t·∫£ng c·ªßa h·∫ßu h·∫øt c√°c m√°y t√≠nh hi·ªán ƒë·∫°i.","tip_en":"The von Neumann architecture describes a computer that can store both programs and data in the same memory, which is the foundation of most modern computers."},
    {"id":3,"question_vi":"M√°y t√≠nh ƒëi·ªán t·ª≠ chuy√™n d·ª•ng ƒë·∫ßu ti√™n ƒë∆∞·ª£c g·ªçi l√† ___.","question_en":"The first electronic special-purpose computer was called ___.","answers_vi":[{"text":"Pascal","correct":false},{"text":"Pascaline","correct":false},{"text":"ABC (Atanasoff-Berry Computer)","correct":true},{"text":"ENIAC","correct":false}],"answers_en":[{"text":"Pascal","correct":false},{"text":"Pascaline","correct":false},{"text":"ABC (Atanasoff-Berry Computer)","correct":true},{"text":"ENIAC","correct":false}],"tip_vi":"M√°y t√≠nh Atanasoff-Berry (ABC) ƒë∆∞·ª£c coi l√† m√°y t√≠nh ƒëi·ªán t·ª≠ k·ªπ thu·∫≠t s·ªë t·ª± ƒë·ªông ƒë·∫ßu ti√™n.","tip_en":"The Atanasoff-Berry Computer (ABC) is considered the first automatic electronic digital computer."},
    {"id":4,"question_vi":"M·ªôt trong nh·ªØng m√°y t√≠nh ƒë·∫ßu ti√™n d·ª±a tr√™n m√¥ h√¨nh von Neumann ƒë∆∞·ª£c g·ªçi l√† ___.","question_en":"One of the first computers based on the von Neumann model was called ___.","answers_vi":[{"text":"Pascal","correct":false},{"text":"Pascaline","correct":false},{"text":"ABC","correct":false},{"text":"EDVAC","correct":true}],"answers_en":[{"text":"Pascal","correct":false},{"text":"Pascaline","correct":false},{"text":"ABC","correct":false},{"text":"EDVAC","correct":true}],"tip_vi":"EDVAC (Electronic Discrete Variable Automatic Computer) l√† m·ªôt trong nh·ªØng m√°y t√≠nh ƒë·∫ßu ti√™n ƒë∆∞·ª£c thi·∫øt k·∫ø theo ki·∫øn tr√∫c von Neumann.","tip_en":"EDVAC (Electronic Discrete Variable Automatic Computer) was one of the first computers designed according to the von Neumann architecture."},
    {"id":5,"question_vi":"M√°y t√≠nh ƒë·∫ßu ti√™n s·ª≠ d·ª•ng √Ω t∆∞·ªüng l∆∞u tr·ªØ v√† l·∫≠p tr√¨nh ƒë∆∞·ª£c g·ªçi l√† ___.","question_en":"The first computing machine to use the idea of storage and programming was called ___.","answers_vi":[{"text":"the Madeline","correct":false},{"text":"EDVAC","correct":false},{"text":"the Babbage machine","correct":false},{"text":"the Jacquard loom","correct":true}],"answers_en":[{"text":"the Madeline","correct":false},{"text":"EDVAC","correct":false},{"text":"the Babbage machine","correct":false},{"text":"the Jacquard loom","correct":true}],"tip_vi":"M√°y d·ªát Jacquard s·ª≠ d·ª•ng c√°c th·∫ª ƒë·ª•c l·ªó ƒë·ªÉ ƒëi·ªÅu khi·ªÉn c√°c m·∫´u d·ªát, ƒë√¢y l√† m·ªôt d·∫°ng l∆∞u tr·ªØ ch∆∞∆°ng tr√¨nh s∆° khai.","tip_en":"The Jacquard loom used punched cards to control weaving patterns, an early form of program storage."},
    {"id":6,"question_vi":"M·ªôt m√°y t√≠nh th·∫ø k·ª∑ 17 c√≥ th·ªÉ th·ª±c hi·ªán ph√©p c·ªông v√† tr·ª´ l√† _______.","question_en":"A 17th-century computing machine that could perform addition and subtraction was the _______.","answers_vi":[{"text":"Pascaline","correct":true},{"text":"Jacquard loom","correct":false},{"text":"Analytical Engine","correct":false},{"text":"Babbage machine","correct":false}],"answers_en":[{"text":"Pascaline","correct":true},{"text":"Jacquard loom","correct":false},{"text":"Analytical Engine","correct":false},{"text":"Babbage machine","correct":false}],"tip_vi":"Pascaline, do Blaise Pascal ph√°t minh, l√† m·ªôt trong nh·ªØng m√°y t√≠nh c∆° h·ªçc ƒë·∫ßu ti√™n.","tip_en":"The Pascaline, invented by Blaise Pascal, was one of the first mechanical calculators."},
    {"id":7,"question_vi":"Ng√¥n ng·ªØ k√Ω hi·ªáu ƒë∆∞·ª£c ph√°t tri·ªÉn v√†o _______.","question_en":"Symbolic languages were developed in _______.","answers_vi":[{"text":"1962","correct":false},{"text":"1974","correct":false},{"text":"1980","correct":false},{"text":"1950","correct":true}],"answers_en":[{"text":"1962","correct":false},{"text":"1974","correct":false},{"text":"1980","correct":false},{"text":"1950","correct":true}],"tip_vi":"Th·∫≠p ni√™n 1950 ch·ª©ng ki·∫øn s·ª± ra ƒë·ªùi c·ªßa c√°c h·ª£p ng·ªØ (assembly languages), l√† nh·ªØng ng√¥n ng·ªØ k√Ω hi·ªáu ƒë·∫ßu ti√™n.","tip_en":"The 1950s saw the development of assembly languages, which were the first symbolic languages."},
    {"id":8,"question_vi":"M√°y vi t√≠nh Apple Macintosh II ƒë∆∞·ª£c gi·ªõi thi·ªáu ra th·ªã tr∆∞·ªùng khi n√†o?","question_en":"When was Apple Macintosh II microcomputer introduced in the market?","answers_vi":[{"text":"1964","correct":false},{"text":"1970","correct":false},{"text":"1986","correct":false},{"text":"1987","correct":true}],"answers_en":[{"text":"1964","correct":false},{"text":"1970","correct":false},{"text":"1986","correct":false},{"text":"1987","correct":true}],"tip_vi":"Macintosh II, ra m·∫Øt nƒÉm 1987, l√† m·ªôt c·ªôt m·ªëc quan tr·ªçng c·ªßa Apple v·ªõi kh·∫£ nƒÉng hi·ªÉn th·ªã m√†u.","tip_en":"The Macintosh II, released in 1987, was a significant milestone for Apple with its color display capabilities."},
    {"id":9,"question_vi":"T√™n g·ªçi c·ªßa m√°y t√≠nh ·ªü quy m√¥ ph√¢n t·ª≠ l√† g√¨?","question_en":"What is the name given to the molecular-scale computer?","answers_vi":[{"text":"Supercomputer","correct":false},{"text":"Femtocomputer","correct":false},{"text":"Nanocomputer","correct":true},{"text":"Microcomputer","correct":false}],"answers_en":[{"text":"Supercomputer","correct":false},{"text":"Femtocomputer","correct":false},{"text":"Nanocomputer","correct":true},{"text":"Microcomputer","correct":false}],"tip_vi":"C√¥ng ngh·ªá nano (Nanotechnology) li√™n quan ƒë·∫øn vi·ªác ch·∫ø t·∫°o c√°c thi·∫øt b·ªã ·ªü quy m√¥ nano m√©t, bao g·ªìm c·∫£ m√°y t√≠nh.","tip_en":"Nanotechnology deals with building devices at the nanometer scale, including computers."},
    {"id":10,"question_vi":"Con ng∆∞·ªùi ƒë∆∞·ª£c g·ªçi l√† Homosapiens. Thi·∫øt b·ªã n√†o ƒë∆∞·ª£c g·ªçi l√† Silico sapiens?","question_en":"Human beings are referred to as Homosapiens. Which device is called Silico sapiens?","answers_vi":[{"text":"Monitor","correct":false},{"text":"Hardware","correct":false},{"text":"Robot","correct":false},{"text":"Computer","correct":true}],"answers_en":[{"text":"Monitor","correct":false},{"text":"Hardware","correct":false},{"text":"Robot","correct":false},{"text":"Computer","correct":true}],"tip_vi":"'Silico sapiens' (sinh v·∫≠t th√¥ng minh d·ª±a tr√™n silicon) l√† m·ªôt thu·∫≠t ng·ªØ ·∫©n d·ª• cho m√°y t√≠nh, v√¨ chip c·ªßa ch√∫ng ƒë∆∞·ª£c l√†m t·ª´ silicon.","tip_en":"'Silico sapiens' (silicon-based intelligent being) is a metaphorical term for computers, as their chips are made from silicon."},
    {"id":11,"question_vi":"Lƒ©nh v·ª±c n√†o sau ƒë√¢y hi·ªán kh√¥ng ph·∫£i l√† m·ªôt ch·ªß ƒë·ªÅ trong khoa h·ªçc m√°y t√≠nh?","question_en":"Which of the following is not currently a topic in computer science?","answers_vi":[{"text":"Nh·∫≠n d·∫°ng gi·ªçng n√≥i","correct":false},{"text":"Tr√≠ tu·ªá nh√¢n t·∫°o","correct":false},{"text":"Nhi·ªát ƒë·ªông l·ª±c h·ªçc","correct":true},{"text":"ƒêa x·ª≠ l√Ω","correct":false}],"answers_en":[{"text":"Speech recognition","correct":false},{"text":"Artificial intelligence","correct":false},{"text":"Thermodynamics","correct":true},{"text":"Multiprocessing","correct":false}],"tip_vi":"Nhi·ªát ƒë·ªông l·ª±c h·ªçc l√† m·ªôt nh√°nh c·ªßa v·∫≠t l√Ω, trong khi c√°c l·ª±a ch·ªçn kh√°c l√† c√°c lƒ©nh v·ª±c con c·ªßa khoa h·ªçc m√°y t√≠nh.","tip_en":"Thermodynamics is a branch of physics, while the other options are subfields of computer science."},
    
    // --- Ph·∫ßn 2 ---
    {"id":12,"question_vi":"Trong m√°y t√≠nh, h·ªá th·ªëng con _______ th·ª±c hi·ªán c√°c ph√©p t√≠nh v√† to√°n t·ª≠ logic.","question_en":"In a computer, the _______ subsystem performs calculations and logical operations.","answers_vi":[{"text":"ALU","correct":true},{"text":"nh·∫≠p/xu·∫•t","correct":false},{"text":"b·ªô nh·ªõ","correct":false},{"text":"ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":false}],"answers_en":[{"text":"ALU","correct":true},{"text":"input/output","correct":false},{"text":"memory","correct":false},{"text":"control unit","correct":false}],"tip_vi":"ALU (Arithmetic Logic Unit) l√† b·ªô ph·∫≠n c·ªßa CPU ch·ªãu tr√°ch nhi·ªám th·ª±c hi·ªán c√°c ph√©p to√°n s·ªë h·ªçc v√† logic.","tip_en":"The ALU (Arithmetic Logic Unit) is the part of the CPU responsible for performing arithmetic and logical operations."},
    {"id":13,"question_vi":"Trong m√°y t√≠nh, h·ªá th·ªëng con _______ l∆∞u tr·ªØ d·ªØ li·ªáu v√† ch∆∞∆°ng tr√¨nh.","question_en":"In a computer, the _______ subsystem stores data and programs.","answers_vi":[{"text":"ALU","correct":false},{"text":"nh·∫≠p/xu·∫•t","correct":false},{"text":"b·ªô nh·ªõ","correct":true},{"text":"ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":false}],"answers_en":[{"text":"ALU","correct":false},{"text":"input/output","correct":false},{"text":"memory","correct":true},{"text":"control unit","correct":false}],"tip_vi":"B·ªô nh·ªõ (Memory) l√† th√†nh ph·∫ßn ch·ªãu tr√°ch nhi·ªám l∆∞u tr·ªØ c·∫£ ch·ªâ th·ªã (ch∆∞∆°ng tr√¨nh) v√† d·ªØ li·ªáu ƒë·ªÉ CPU c√≥ th·ªÉ truy c·∫≠p v√† x·ª≠ l√Ω.","tip_en":"Memory is the component responsible for storing both instructions (programs) and data so the CPU can access and process them."},
    {"id":14,"question_vi":"Trong m√°y t√≠nh, h·ªá th·ªëng con _______ ch·∫•p nh·∫≠n d·ªØ li·ªáu v√† ch∆∞∆°ng tr√¨nh v√† g·ª≠i k·∫øt qu·∫£ x·ª≠ l√Ω ƒë·∫øn c√°c thi·∫øt b·ªã ƒë·∫ßu ra.","question_en":"In a computer, the _______ subsystem accepts data and programs and sends processing results to output devices.","answers_vi":[{"text":"ALU","correct":false},{"text":"nh·∫≠p/xu·∫•t","correct":true},{"text":"b·ªô nh·ªõ","correct":false},{"text":"ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":false}],"answers_en":[{"text":"ALU","correct":false},{"text":"input/output","correct":true},{"text":"memory","correct":false},{"text":"control unit","correct":false}],"tip_vi":"H·ªá th·ªëng con Nh·∫≠p/Xu·∫•t (Input/Output) l√† c·∫ßu n·ªëi gi·ªØa m√°y t√≠nh v√† th·∫ø gi·ªõi b√™n ngo√†i (ng∆∞·ªùi d√πng, c√°c thi·∫øt b·ªã kh√°c).","tip_en":"The Input/Output subsystem is the bridge between the computer and the outside world (users, other devices)."},
    {"id":15,"question_vi":"Trong m√°y t√≠nh, h·ªá th·ªëng con _______ ƒë√≥ng vai tr√≤ l√† ng∆∞·ªùi qu·∫£n l√Ω c√°c h·ªá th·ªëng con kh√°c.","question_en":"In a computer, the _______ subsystem serves as a manager of the other subsystems.","answers_vi":[{"text":"ALU","correct":false},{"text":"nh·∫≠p/xu·∫•t","correct":false},{"text":"b·ªô nh·ªõ","correct":false},{"text":"ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":true}],"answers_en":[{"text":"ALU","correct":false},{"text":"input/output","correct":false},{"text":"memory","correct":false},{"text":"control unit","correct":true}],"tip_vi":"ƒê∆°n v·ªã ƒëi·ªÅu khi·ªÉn (Control Unit) ƒëi·ªÅu ph·ªëi ho·∫°t ƒë·ªông c·ªßa t·∫•t c·∫£ c√°c b·ªô ph·∫≠n kh√°c trong m√°y t√≠nh, gi·ªëng nh∆∞ m·ªôt ng∆∞·ªùi qu·∫£n l√Ω.","tip_en":"The Control Unit coordinates the activities of all other parts of the computer, like a manager."},
    {"id":16,"question_vi":"Theo m√¥ h√¨nh von Neumann, _______ ƒë∆∞·ª£c l∆∞u tr·ªØ trong b·ªô nh·ªõ.","question_en":"According to the von Neumann model, _______ are stored in memory.","answers_vi":[{"text":"ch·ªâ d·ªØ li·ªáu","correct":false},{"text":"ch·ªâ ch∆∞∆°ng tr√¨nh","correct":false},{"text":"d·ªØ li·ªáu v√† ch∆∞∆°ng tr√¨nh","correct":true},{"text":"kh√¥ng ph·∫£i d·ªØ li·ªáu c≈©ng kh√¥ng ph·∫£i ch∆∞∆°ng tr√¨nh","correct":false}],"answers_en":[{"text":"only data","correct":false},{"text":"only programs","correct":false},{"text":"data and programs","correct":true},{"text":"neither data nor programs","correct":false}],"tip_vi":"Ki·∫øn tr√∫c von Neumann ƒë·∫∑c tr∆∞ng b·ªüi vi·ªác l∆∞u tr·ªØ c·∫£ ch∆∞∆°ng tr√¨nh (ch·ªâ th·ªã) v√† d·ªØ li·ªáu trong c√πng m·ªôt kh√¥ng gian b·ªô nh·ªõ.","tip_en":"The von Neumann architecture is characterized by storing both programs (instructions) and data in the same memory space."},
    {"id":17,"question_vi":"_______ l√† m·ªôt h·ªá th·ªëng con c·ªßa m√°y t√≠nh th·ª±c hi·ªán c√°c ho·∫°t ƒë·ªông tr√™n d·ªØ li·ªáu.","question_en":"The _______ is a computer subsystem that performs operations on data.","answers_vi":[{"text":"B·ªô nh·ªõ","correct":false},{"text":"CPU","correct":true},{"text":"H·ªá th·ªëng con I/O","correct":false},{"text":"ƒê∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":false}],"answers_en":[{"text":"Memory","correct":false},{"text":"CPU","correct":true},{"text":"I/O subsystem","correct":false},{"text":"Control Unit","correct":false}],"tip_vi":"CPU (Central Processing Unit) l√† b·ªô n√£o c·ªßa m√°y t√≠nh, ch·ªãu tr√°ch nhi·ªám th·ª±c hi·ªán h·∫ßu h·∫øt c√°c x·ª≠ l√Ω.","tip_en":"The CPU (Central Processing Unit) is the brain of the computer, responsible for most of the processing."},
    {"id":18,"question_vi":"_______ l√† m·ªôt v·ªã tr√≠ l∆∞u tr·ªØ ƒë·ªôc l·∫≠p gi·ªØ d·ªØ li·ªáu t·∫°m th·ªùi.","question_en":"_______ is a stand-alone storage location that holds data temporarily.","answers_vi":[{"text":"M·ªôt ALU","correct":false},{"text":"M·ªôt thanh ghi","correct":true},{"text":"M·ªôt ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn","correct":false},{"text":"M·ªôt bus","correct":false}],"answers_en":[{"text":"An ALU","correct":false},{"text":"A register","correct":true},{"text":"A control unit","correct":false},{"text":"A bus","correct":false}],"tip_vi":"Thanh ghi (Register) l√† c√°c v·ªã tr√≠ l∆∞u tr·ªØ nh·ªè, t·ªëc ƒë·ªô cao b√™n trong CPU ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ l∆∞u gi·ªØ t·∫°m th·ªùi d·ªØ li·ªáu ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω.","tip_en":"Registers are small, high-speed storage locations within the CPU used to temporarily hold data being processed."},
    {"id":19,"question_vi":"M·ªôt thanh ghi trong CPU c√≥ th·ªÉ ch·ª©a _______.","question_en":"A register in a CPU can hold _______.","answers_vi":[{"text":"ch·ªâ d·ªØ li·ªáu","correct":false},{"text":"ch·ªâ ch·ªâ th·ªã","correct":false},{"text":"ch·ªâ gi√° tr·ªã c·ªßa b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh","correct":false},{"text":"d·ªØ li·ªáu, ch·ªâ th·ªã, ho·∫∑c gi√° tr·ªã c·ªßa b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh","correct":true}],"answers_en":[{"text":"only data","correct":false},{"text":"only instructions","correct":false},{"text":"only program counter values","correct":false},{"text":"data, instructions, or program counter values","correct":true}],"tip_vi":"C√°c thanh ghi c√≥ m·ª•c ƒë√≠ch kh√°c nhau; m·ªôt s·ªë gi·ªØ d·ªØ li·ªáu, m·ªôt s·ªë gi·ªØ ƒë·ªãa ch·ªâ c·ªßa ch·ªâ th·ªã ti·∫øp theo (b·ªô ƒë·∫øm ch∆∞∆°ng tr√¨nh), v√† m·ªôt s·ªë gi·ªØ ch√≠nh ch·ªâ th·ªã ƒëang ƒë∆∞·ª£c th·ª±c thi.","tip_en":"Registers have different purposes; some hold data, some hold the address of the next instruction (program counter), and some hold the current instruction being executed."},
    {"id":20,"question_vi":"M·ªôt ƒë∆°n v·ªã ƒëi·ªÅu khi·ªÉn v·ªõi nƒÉm d√¢y c√≥ th·ªÉ x√°c ƒë·ªãnh t·ªëi ƒëa _______ ho·∫°t ƒë·ªông.","question_en":"A control unit with five wires can define up to _______ operations.","answers_vi":[{"text":"5","correct":false},{"text":"10","correct":false},{"text":"16","correct":false},{"text":"32","correct":true}],"answers_en":[{"text":"5","correct":false},{"text":"10","correct":false},{"text":"16","correct":false},{"text":"32","correct":true}],"tip_vi":"V·ªõi N d√¢y (bit), b·∫°n c√≥ th·ªÉ bi·ªÉu di·ªÖn 2^N tr·∫°ng th√°i ho·∫∑c ho·∫°t ƒë·ªông kh√°c nhau. 2^5 = 32.","tip_en":"With N wires (bits), you can represent 2^N different states or operations. 2^5 = 32."},
    // --- Th√™m c√°c c√¢u h·ªèi c√≤n l·∫°i ---
    // ...
    {"id":182,"question_vi":"C√°i n√†o sau ƒë√¢y ƒë·∫°i di·ªán cho m·ªôt t·∫≠p h·ª£p c√°c m·ª•c d·ªØ li·ªáu chia s·∫ª m·ªôt m·ªëi quan h·ªá c·ª• th·ªÉ?","question_en":"Which of the following represents a set of data items that share a specific relationship?","answers_vi":[{"text":"ADT","correct":false},{"text":"C·∫•u tr√∫c d·ªØ li·ªáu","correct":true},{"text":"Ng√¥n ng·ªØ l·∫≠p tr√¨nh","correct":false},{"text":"Ph·∫ßn t·ª≠ d·ªØ li·ªáu","correct":false}],"answers_en":[{"text":"ADT","correct":false},{"text":"Data structure","correct":true},{"text":"Programming language","correct":false},{"text":"Data element","correct":false}],"tip_vi":"C·∫•u tr√∫c d·ªØ li·ªáu (Data Structure) l√† c√°ch t·ªï ch·ª©c, qu·∫£n l√Ω v√† l∆∞u tr·ªØ d·ªØ li·ªáu ƒë·ªÉ c√≥ th·ªÉ truy c·∫≠p v√† s·ª≠a ƒë·ªïi m·ªôt c√°ch hi·ªáu qu·∫£.","tip_en":"A Data Structure is a way of organizing, managing, and storing data to enable efficient access and modification."}
];
// --- END OF QUESTION BANK ---

// State variables
let currentLanguage = 'vi';
let quizQuestions = [];
let currentQuestionIndex = 0;
let score = 0;
let userAnswers = [];
let totalQuestionsSelected = 0;
let theorySummaries = {};

// UI Elements
const uiElements = {
    langBtn: document.getElementById('lang-toggle-btn'),
    theoryContent: document.getElementById('theory-content'),
    quizContent: document.getElementById('quiz-content'),
    theorySummaryDiv: document.getElementById('theory-summary'),
    quizSetupDiv: document.getElementById('quiz-setup'),
    quizContainerDiv: document.getElementById('quiz-container'),
    resultsContainerDiv: document.getElementById('results-container'),
    questionTextDiv: document.getElementById('question-text'),
    answersContainerDiv: document.getElementById('answers-container'),
    progressTextP: document.getElementById('progress-text'),
    progressBar: document.getElementById('progress-bar'),
    memoryTipDiv: document.getElementById('memory-tip'),
    resultsListUl: document.getElementById('results-list'),
    scoreP: document.getElementById('score'),
    nextBtn: document.getElementById('next-btn'),
    submitBtn: document.getElementById('submit-btn'),
    numQuestionsInput: document.getElementById('num-questions-input')
};

// --- THEORY TAB LOGIC ---
function generateTheoryFromBank() {
    let summary_vi = '';
    let summary_en = '';

    mcqBank.forEach(q => {
        const correctAnswerVi = q.answers_vi.find(a => a.correct).text;
        const correctAnswerEn = q.answers_en.find(a => a.correct).text;
        
        let questionVi = q.question_vi;
        if (questionVi.includes('_______')) {
             questionVi = questionVi.replace('_______', `<span>${correctAnswerVi}</span>`);
        } else {
            questionVi = `${q.question_vi.slice(0, -1)}: <span>${correctAnswerVi}</span>`;
        }

        let questionEn = q.question_en;
        if (questionEn.includes('_______')) {
            questionEn = questionEn.replace('_______', `<span>${correctAnswerEn}</span>`);
        } else {
             questionEn = `${q.question_en.slice(0, -1)}: <span>${correctAnswerEn}</span>`;
        }
       
        summary_vi += `<p>${questionVi}</p>`;
        summary_en += `<p>${questionEn}</p>`;
    });

    theorySummaries = { vi: summary_vi, en: summary_en };
}

function renderTheory() {
    uiElements.theorySummaryDiv.innerHTML = theorySummaries[currentLanguage];
}

// --- LANGUAGE TOGGLE LOGIC ---
function toggleLanguage() {
    currentLanguage = (currentLanguage === 'vi') ? 'en' : 'vi';
    updateAllUIText();
    if (uiElements.theoryContent.classList.contains('active')) {
        renderTheory();
    }
    if (uiElements.quizContainerDiv.style.display !== 'none') {
        renderCurrentQuestion(true); // true indicates it's a language switch
    }
    if (uiElements.resultsContainerDiv.style.display !== 'none') {
        showResults();
    }
}

function updateAllUIText() {
    const isVietnamese = currentLanguage === 'vi';
    const uiText = {
        mainTitle: { vi: '√în t·∫≠p CSI106', en: 'CSI106 Review' },
        langBtn: { vi: 'Translate to English', en: 'D·ªãch sang Ti·∫øng Vi·ªát' },
        theoryTab: { vi: 'L√Ω Thuy·∫øt', en: 'Theory' },
        quizTab: { vi: 'L√†m Quiz', en: 'Quiz' },
        theoryTitle: { vi: 'T√≥m T·∫Øt L√Ω Thuy·∫øt C·ªët L√µi', en: 'Core Theory Summary' },
        quizSetupTitle: { vi: 'Nh·∫≠p s·ªë c√¢u h·ªèi b·∫°n mu·ªën l√†m:', en: 'Enter the number of questions:' },
        startQuizBtn: { vi: 'B·∫Øt ƒë·∫ßu', en: 'Start Quiz' },
        submitBtn: { vi: 'N·ªôp b√†i', en: 'Submit' },
        nextBtn: { vi: 'C√¢u Ti·∫øp Theo', en: 'Next Question' },
        resultsTitle: { vi: 'K·∫øt qu·∫£', en: 'Results' },
        restartBtn: { vi: 'L√†m l·∫°i', en: 'Restart' }
    };

    document.querySelector('h1').textContent = uiText.mainTitle[currentLanguage];
    uiElements.langBtn.textContent = uiText.langBtn[currentLanguage];
    document.getElementById('theory-tab-btn').textContent = uiText.theoryTab[currentLanguage];
    document.getElementById('quiz-tab-btn').textContent = uiText.quizTab[currentLanguage];
    document.getElementById('theory-title').textContent = uiText.theoryTitle[currentLanguage];
    document.getElementById('quiz-setup-title').textContent = uiText.quizSetupTitle[currentLanguage];
    document.getElementById('start-quiz-btn').textContent = uiText.startQuizBtn[currentLanguage];
    uiElements.submitBtn.textContent = uiText.submitBtn[currentLanguage];
    uiElements.nextBtn.textContent = uiText.nextBtn[currentLanguage];
    document.getElementById('results-title').textContent = uiText.resultsTitle[currentLanguage];
    document.getElementById('restart-btn').textContent = uiText.restartBtn[currentLanguage];
}

// --- TAB SWITCHING LOGIC ---
function switchTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
    document.getElementById(`${tabName}-content`).classList.add('active');
    document.getElementById(`${tabName}-tab-btn`).classList.add('active');
}

// --- QUIZ LOGIC ---
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startQuiz() {
    const num = parseInt(uiElements.numQuestionsInput.value);
    if (isNaN(num) || num < 1 || num > mcqBank.length) {
        const alertMsg = currentLanguage === 'vi' 
            ? `Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá t·ª´ 1 ƒë·∫øn ${mcqBank.length}.`
            : `Please enter a valid number between 1 and ${mcqBank.length}.`;
        alert(alertMsg);
        return;
    }
    
    totalQuestionsSelected = num;
    score = 0;
    currentQuestionIndex = 0;
    userAnswers = new Array(totalQuestionsSelected).fill(null);
    
    let shuffledBank = shuffleArray([...mcqBank]);
    quizQuestions = shuffledBank.slice(0, totalQuestionsSelected);

    uiElements.quizSetupDiv.style.display = 'none';
    uiElements.resultsContainerDiv.style.display = 'none';
    uiElements.quizContainerDiv.style.display = 'block';

    renderCurrentQuestion(false);
}

function renderCurrentQuestion(isLanguageSwitch = false) {
    if (currentQuestionIndex >= quizQuestions.length) return;
    
    const questionData = quizQuestions[currentQuestionIndex];
    const questionLang = currentLanguage === 'vi' ? 'question_vi' : 'question_en';
    const answersLang = currentLanguage === 'vi' ? 'answers_vi' : 'answers_en';
    
    uiElements.progressBar.style.width = `${((currentQuestionIndex) / totalQuestionsSelected) * 100}%`;
    uiElements.progressTextP.textContent = `${currentLanguage === 'vi' ? 'C√¢u' : 'Question'} ${currentQuestionIndex + 1} / ${totalQuestionsSelected}`;
    uiElements.questionTextDiv.textContent = questionData[questionLang];
    uiElements.answersContainerDiv.innerHTML = '';
    uiElements.memoryTipDiv.style.display = 'none';
    uiElements.nextBtn.style.display = 'none';
    uiElements.submitBtn.style.display = 'inline-block';

    const answers = isLanguageSwitch 
        ? [...questionData[answersLang]] // Keep order for consistency on translate
        : shuffleArray([...questionData[answersLang]]);
    
    answers.forEach(answer => {
        const button = document.createElement('button');
        button.className = 'answer-btn';
        button.innerHTML = `${answer.text}<i class="icon"></i>`;
        button.onclick = () => selectAnswer(button, answer.correct, answer.text);
        uiElements.answersContainerDiv.appendChild(button);
    });

    const answered = userAnswers[currentQuestionIndex];
    if (isLanguageSwitch && answered) {
        applyAnswerState(answered);
    }
}

function selectAnswer(selectedButton, isCorrect, selectedText) {
    userAnswers[currentQuestionIndex] = { text: selectedText, isCorrect: isCorrect };
    applyAnswerState(userAnswers[currentQuestionIndex]);
    if (isCorrect) score++;
}

function applyAnswerState(answered) {
    const { text, isCorrect } = answered;
    const currentAnswers = quizQuestions[currentQuestionIndex][currentLanguage === 'vi' ? 'answers_vi' : 'answers_en'];
    const correctText = currentAnswers.find(a => a.correct).text;
    
    document.querySelectorAll('.answer-btn').forEach(btn => {
        btn.disabled = true;
        const btnText = btn.textContent;
        const icon = btn.querySelector('.icon');

        if (btnText === correctText) {
            btn.classList.add('correct');
            icon.textContent = '‚úîÔ∏è';
        }

        if (btnText === text) { // This is the user's choice
            if (!isCorrect) {
                btn.classList.add('incorrect');
                icon.textContent = '‚ùå';
            } else {
                 icon.textContent = '‚úîÔ∏è'; // Already handled by correct check but good for clarity
            }
        }
    });

    if (!isCorrect) {
        const tipLang = currentLanguage === 'vi' ? 'tip_vi' : 'tip_en';
        uiElements.memoryTipDiv.textContent = `${currentLanguage === 'vi' ? 'M·∫πo ghi nh·ªõ' : 'Memory Tip'}: ${quizQuestions[currentQuestionIndex][tipLang]}`;
        uiElements.memoryTipDiv.style.display = 'block';
    }

    uiElements.nextBtn.style.display = 'inline-block';
    uiElements.submitBtn.style.display = 'none';
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < quizQuestions.length) {
        renderCurrentQuestion(false);
    } else {
        uiElements.progressBar.style.width = '100%';
        showResults();
    }
}

function submitQuiz() {
    uiElements.progressBar.style.width = '100%';
    showResults();
}

function showResults() {
    uiElements.quizContainerDiv.style.display = 'none';
    uiElements.resultsContainerDiv.style.display = 'block';
    
    const scoreText = currentLanguage === 'vi' ? `B·∫°n ƒë√∫ng ${score} / ${totalQuestionsSelected} c√¢u!` : `You got ${score} / ${totalQuestionsSelected} correct!`;
    uiElements.scoreP.textContent = scoreText;
    
    uiElements.resultsListUl.innerHTML = '';
    quizQuestions.forEach((question, index) => {
        const li = document.createElement('li');
        const userAnswer = userAnswers[index];
        const questionLang = currentLanguage === 'vi' ? 'question_vi' : 'question_en';
        const answersLang = currentLanguage === 'vi' ? 'answers_vi' : 'answers_en';
        const tipLang = currentLanguage === 'vi' ? 'tip_vi' : 'tip_en';
        const correctAnswerText = question[answersLang].find(a => a.correct).text;

        let resultHTML = `<div class="result-question">${index + 1}. ${question[questionLang]}</div>`;
        
        if (userAnswer) {
            li.classList.add(userAnswer.isCorrect ? 'result-correct' : 'result-incorrect');
            const yourAnswerLabel = currentLanguage === 'vi' ? 'B·∫°n ch·ªçn' : 'You chose';
            resultHTML += `<div class="result-answer">${yourAnswerLabel}: ${userAnswer.text}</div>`;
            if (!userAnswer.isCorrect) {
                const correctLabel = currentLanguage === 'vi' ? 'ƒê√°p √°n ƒë√∫ng' : 'Correct answer';
                resultHTML += `<div class="result-answer">${correctLabel}: ${correctAnswerText}</div>`;
                resultHTML += `<div class="result-tip">üí° ${question[tipLang]}</div>`;
            }
        } else {
            li.classList.add('result-incorrect');
            const unansweredLabel = currentLanguage === 'vi' ? 'B·∫°n ƒë√£ b·ªè qua' : 'You skipped';
            const correctLabel = currentLanguage === 'vi' ? 'ƒê√°p √°n ƒë√∫ng' : 'Correct answer';
            resultHTML += `<div class="result-answer">${unansweredLabel}</div>`;
            resultHTML += `<div class="result-answer">${correctLabel}: ${correctAnswerText}</div>`;
            resultHTML += `<div class="result-tip">üí° ${question[tipLang]}</div>`;
        }
        
        li.innerHTML = resultHTML;
        uiElements.resultsListUl.appendChild(li);
    });
}

function restartQuiz() {
    uiElements.resultsContainerDiv.style.display = 'none';
    uiElements.quizSetupDiv.style.display = 'block';
}

// --- INITIALIZATION ---
document.addEventListener('DOMContentLoaded', () => {
    uiElements.langBtn.addEventListener('click', toggleLanguage);
    generateTheoryFromBank();
    renderTheory();
    updateAllUIText();
});

</script>
</body>
</html>
