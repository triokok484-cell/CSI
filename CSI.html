<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ôn Tập Khoa Học Máy Tính</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--secondary-color);
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .language-toggle:hover {
            background-color: #2980b9;
        }
        
        .tabs {
            display: flex;
            background-color: var(--dark-color);
            border-radius: 0 0 8px 8px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background-color: var(--dark-color);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .tab:hover {
            background-color: #3a506b;
        }
        
        .tab.active {
            background-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 500px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .theory-content {
            line-height: 1.8;
        }
        
        .theory-content h2 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
            padding-bottom: 10px;
        }
        
        .theory-content p {
            margin-bottom: 15px;
        }
        
        .quiz-setup {
            background-color: var(--light-color);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .quiz-setup label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .quiz-setup input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            display: inline-block;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .btn-warning:hover {
            background-color: #d35400;
        }
        
        .question-container {
            margin-bottom: 30px;
        }
        
        .question-number {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .question-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .options-container {
            margin-bottom: 20px;
        }
        
        .option {
            display: block;
            margin-bottom: 10px;
            padding: 12px 15px;
            background-color: var(--light-color);
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #d6dbdf;
        }
        
        .option.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .option.correct {
            background-color: var(--success-color);
            color: white;
        }
        
        .option.incorrect {
            background-color: var(--danger-color);
            color: white;
        }
        
        .feedback {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            display: none;
        }
        
        .feedback.correct {
            background-color: rgba(46, 204, 113, 0.2);
            border-left: 4px solid var(--success-color);
        }
        
        .feedback.incorrect {
            background-color: rgba(231, 76, 60, 0.2);
            border-left: 4px solid var(--danger-color);
        }
        
        .memory-tip {
            background-color: rgba(243, 156, 18, 0.2);
            border-left: 4px solid var(--warning-color);
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
            display: none;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .result-container {
            text-align: center;
            padding: 30px;
        }
        
        .score {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .result-details {
            text-align: left;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            margin-bottom: 10px;
        }
        
        .result-item.correct {
            background-color: rgba(46, 204, 113, 0.1);
        }
        
        .result-item.incorrect {
            background-color: rgba(231, 76, 60, 0.1);
        }
        
        .result-question {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .result-answer {
            margin-bottom: 5px;
        }
        
        .result-explanation {
            font-style: italic;
            color: #666;
        }
        
        .progress-bar {
            height: 10px;
            background-color: var(--light-color);
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .language-toggle {
                position: static;
                margin-top: 10px;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Ôn Tập Khoa Học Máy Tính</h1>
            <p class="subtitle">Hệ thống câu hỏi trắc nghiệm toàn diện</p>
            <button class="language-toggle" id="translateBtn">Translate to English</button>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="theory">Lý Thuyết</button>
            <button class="tab" data-tab="quiz">Làm Bài Tập</button>
        </div>
        
        <div class="tab-content active" id="theory">
            <div class="theory-content">
                <h2>Ngôn Ngữ Máy Tính</h2>
                <p>Một giải pháp từng bước cho một vấn đề được gọi là <strong>thuật toán</strong>. Đây là một chuỗi các bước rõ ràng, xác định để giải quyết một vấn đề hoặc thực hiện một nhiệm vụ cụ thể.</p>
                
                <h2>Mô Hình Von Neumann</h2>
                <p>Mô hình Von Neumann là cơ sở cho các máy tính ngày nay. Được đề xuất bởi John von Neumann vào năm 1945, mô hình này mô tả kiến trúc của một máy tính điện tử với các thành phần chính:</p>
                <ul>
                    <li><strong>Bộ xử lý trung tâm (CPU):</strong> Thực hiện các phép tính và điều khiển hoạt động của máy tính</li>
                    <li><strong>Bộ nhớ:</strong> Lưu trữ cả chương trình và dữ liệu</li>
                    <li><strong>Thiết bị đầu vào/đầu ra:</strong> Cho phép tương tác với môi trường bên ngoài</li>
                </ul>
                <p>Một đặc điểm quan trọng của mô hình này là khái niệm "chương trình được lưu trữ" - cả hướng dẫn và dữ liệu được lưu trữ trong cùng một bộ nhớ, cho phép máy tính thực hiện nhiều loại nhiệm vụ khác nhau mà không cần thay đổi phần cứng.</p>
                
                <h2>Các Thành Phần Cơ Bản Của Máy Tính</h2>
                <p>Máy tính hiện đại bao gồm các thành phần chính:</p>
                <ol>
                    <li><strong>Phần cứng:</strong> Các thành phần vật lý của máy tính</li>
                    <li><strong>Phần mềm:</strong> Các chương trình hướng dẫn phần cứng thực hiện nhiệm vụ</li>
                    <li><strong>Dữ liệu:</strong> Thông tin thô mà máy tính xử lý</li>
                    <li><strong>Người dùng:</strong> Những người tương tác với máy tính</li>
                </ol>
                
                <h2>Biểu Diễn Dữ Liệu</h2>
                <p>Máy tính sử dụng hệ nhị phân (cơ số 2) để biểu diễn tất cả dữ liệu. Mỗi chữ số nhị phân (0 hoặc 1) được gọi là một bit. Các nhóm 8 bit tạo thành một byte, đơn vị cơ bản của bộ nhớ máy tính.</p>
                
                <h2>Phát Triển Phần Mềm</h2>
                <p>Quá trình phát triển phần mềm bao gồm các giai đoạn:</p>
                <ol>
                    <li>Phân tích yêu cầu</li>
                    <li>Thiết kế hệ thống</li>
                    <li>Triển khai (lập trình)</li>
                    <li>Kiểm thử</li>
                    <li>Bảo trì</li>
                </ol>
            </div>
        </div>
        
        <div class="tab-content" id="quiz">
            <div class="quiz-setup" id="quizSetup">
                <h2>Thiết Lập Bài Kiểm Tra</h2>
                <label for="questionCount">Số câu hỏi bạn muốn làm:</label>
                <input type="number" id="questionCount" min="1" max="182" value="10">
                <button class="btn" id="startQuiz">Bắt Đầu Làm Bài</button>
            </div>
            
            <div id="quizArea" style="display: none;">
                <div class="progress-bar">
                    <div class="progress" id="quizProgress"></div>
                </div>
                
                <div class="question-container">
                    <div class="question-number" id="questionNumber">Câu hỏi 1/10</div>
                    <div class="question-text" id="questionText"></div>
                    
                    <div class="options-container" id="optionsContainer"></div>
                    
                    <div class="feedback" id="feedback"></div>
                    
                    <div class="memory-tip" id="memoryTip"></div>
                    
                    <div class="navigation">
                        <button class="btn btn-warning" id="prevQuestion" disabled>Câu Trước</button>
                        <button class="btn btn-success" id="nextQuestion">Câu Tiếp Theo</button>
                        <button class="btn btn-danger" id="submitQuiz">Nộp Bài</button>
                    </div>
                </div>
            </div>
            
            <div id="resultArea" style="display: none;">
                <div class="result-container">
                    <h2>Kết Quả Bài Làm</h2>
                    <div class="score" id="finalScore">0/0</div>
                    
                    <div class="result-details" id="resultDetails"></div>
                    
                    <button class="btn" id="restartQuiz">Làm Bài Khác</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Hệ thống ôn tập Khoa học Máy tính &copy; 2023</p>
        </footer>
    </div>

    <script>
        // Ngân hàng câu hỏi
        const questionBank = [
            {
                id: 1,
                question: "A step-by-step solution to a problem is called _______.",
                options: ["hardware", "an operating system", "a computer language", "an algorithm"],
                correctAnswer: 3,
                explanation: "Một giải pháp từng bước cho một vấn đề được gọi là thuật toán.",
                memoryTip: "Nhớ rằng thuật toán là một chuỗi các bước rõ ràng để giải quyết vấn đề."
            },
            {
                id: 2,
                question: "The _______ model is the basis for today's computers.",
                options: ["Leibnitz", "von Neumann", "Pascal", "Charles Babbage"],
                correctAnswer: 1,
                explanation: "Mô hình von Neumann là cơ sở cho các máy tính ngày nay.",
                memoryTip: "Von Neumann đề xuất mô hình với bộ nhớ chung cho cả chương trình và dữ liệu."
            },
            {
                id: 3,
                question: "The first electronic special-purpose computer was called ___.",
                options: ["Pascal", "Pascaline", "ABC (Atanasoff-Berry Computer)", "ENIAC"],
                correctAnswer: 2,
                explanation: "Máy tính điện tử chuyên dụng đầu tiên được gọi là ABC (Atanasoff-Berry Computer).",
                memoryTip: "ABC là viết tắt của Atanasoff-Berry Computer, máy tính điện tử đầu tiên."
            },
            {
                id: 4,
                question: "One of the first computers based on the von Neumann model was called ___.",
                options: ["Pascal", "Pascaline", "ABC", "EDVAC"],
                correctAnswer: 3,
                explanation: "Một trong những máy tính đầu tiên dựa trên mô hình von Neumann được gọi là EDVAC.",
                memoryTip: "EDVAC là máy tính đầu tiên sử dụng kiến trúc chương trình được lưu trữ."
            },
            {
                id: 5,
                question: "The first computing machine to use the idea of storage and programming was called ___.",
                options: ["the Madeline", "EDVAC", "the Babbage machine", "the Jacquard loom"],
                correctAnswer: 3,
                explanation: "Máy tính đầu tiên sử dụng ý tưởng lưu trữ và lập trình được gọi là khung dệt Jacquard.",
                memoryTip: "Khung dệt Jacquard sử dụng thẻ đục lỗ để lưu trữ mẫu dệt, tiền thân của lập trình."
            },
            {
                id: 6,
                question: "A 17th-century computing machine that could perform addition and subtraction was the _______.",
                options: ["Pascaline", "Jacquard loom", "Analytical Engine", "Babbage machine"],
                correctAnswer: 0,
                explanation: "Một máy tính từ thế kỷ 17 có thể thực hiện phép cộng và trừ là Pascaline.",
                memoryTip: "Pascaline do Blaise Pascal phát minh, là máy tính cơ học đầu tiên."
            },
            {
                id: 7,
                question: "Symbolic languages were developed in _______.",
                options: ["1962", "1974", "1980", "1950"],
                correctAnswer: 3,
                explanation: "Ngôn ngữ ký hiệu được phát triển vào năm 1950.",
                memoryTip: "Ngôn ngữ ký hiệu là tiền thân của ngôn ngữ lập trình cấp cao."
            },
            {
                id: 8,
                question: "When was Apple Macintosh II microcomputer introduced in the market?",
                options: ["1964", "1970", "1986", "1987"],
                correctAnswer: 3,
                explanation: "Máy vi tính Apple Macintosh II được giới thiệu trên thị trường vào năm 1987.",
                memoryTip: "Macintosh II là máy Mac đầu tiên có màu sắc và có thể mở rộng."
            },
            {
                id: 9,
                question: "What is the name given to the molecular-scale computer?",
                options: ["Supercomputer", "Femtocomputer", "Nanocomputer", "Microcomputer"],
                correctAnswer: 2,
                explanation: "Máy tính ở quy mô phân tử được gọi là nanocomputer.",
                memoryTip: "Tiền tố 'nano' chỉ kích thước cực nhỏ, ở cấp độ phân tử."
            },
            {
                id: 10,
                question: "Human beings are referred to as Homosapiens. Which device is called Silico sapiens?",
                options: ["Monitor", "Hardware", "Robot", "Computer"],
                correctAnswer: 3,
                explanation: "Con người được gọi là Homosapiens. Thiết bị nào được gọi là Silico sapiens? Máy tính.",
                memoryTip: "Silico sapiens nghĩa là 'sinh vật thông minh bằng silicon', ám chỉ máy tính."
            }
            // Thêm các câu hỏi khác ở đây...
        ];

        // Biến toàn cục
        let currentLanguage = 'vi';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStarted = false;
        let questionCount = 10;

        // Dịch nội dung
        const translations = {
            vi: {
                title: "Ôn Tập Khoa Học Máy Tính",
                subtitle: "Hệ thống câu hỏi trắc nghiệm toàn diện",
                theoryTab: "Lý Thuyết",
                quizTab: "Làm Bài Tập",
                translateBtn: "Translate to English",
                quizSetupTitle: "Thiết Lập Bài Kiểm Tra",
                questionCountLabel: "Số câu hỏi bạn muốn làm:",
                startQuiz: "Bắt Đầu Làm Bài",
                prevQuestion: "Câu Trước",
                nextQuestion: "Câu Tiếp Theo",
                submitQuiz: "Nộp Bài",
                resultTitle: "Kết Quả Bài Làm",
                restartQuiz: "Làm Bài Khác",
                correctFeedback: "Chính xác!",
                incorrectFeedback: "Sai rồi!",
                unanswered: "[Chưa trả lời]",
                memoryTipTitle: "Mẹo ghi nhớ:",
                footer: "Hệ thống ôn tập Khoa học Máy tính &copy; 2023"
            },
            en: {
                title: "Computer Science Review",
                subtitle: "Comprehensive MCQ question system",
                theoryTab: "Theory",
                quizTab: "Practice Quiz",
                translateBtn: "Dịch sang Tiếng Việt",
                quizSetupTitle: "Quiz Setup",
                questionCountLabel: "Number of questions you want to answer:",
                startQuiz: "Start Quiz",
                prevQuestion: "Previous Question",
                nextQuestion: "Next Question",
                submitQuiz: "Submit Quiz",
                resultTitle: "Quiz Results",
                restartQuiz: "Take Another Quiz",
                correctFeedback: "Correct!",
                incorrectFeedback: "Incorrect!",
                unanswered: "[Not answered]",
                memoryTipTitle: "Memory Tip:",
                footer: "Computer Science Review System &copy; 2023"
            }
        };

        // Hàm dịch toàn bộ trang
        function translatePage() {
            currentLanguage = currentLanguage === 'vi' ? 'en' : 'vi';
            
            // Cập nhật nút dịch
            document.getElementById('translateBtn').textContent = translations[currentLanguage].translateBtn;
            
            // Cập nhật tiêu đề và phụ đề
            document.querySelector('h1').textContent = translations[currentLanguage].title;
            document.querySelector('.subtitle').textContent = translations[currentLanguage].subtitle;
            
            // Cập nhật tab
            document.querySelectorAll('.tab').forEach((tab, index) => {
                if (index === 0) {
                    tab.textContent = translations[currentLanguage].theoryTab;
                } else {
                    tab.textContent = translations[currentLanguage].quizTab;
                }
            });
            
            // Cập nhật footer
            document.querySelector('footer p').textContent = translations[currentLanguage].footer;
            
            // Nếu đang ở tab quiz, cập nhật nội dung
            if (document.getElementById('quiz').classList.contains('active')) {
                updateQuizContent();
            }
            
            // Nếu đang xem kết quả, cập nhật kết quả
            if (document.getElementById('resultArea').style.display !== 'none') {
                displayResults();
            }
        }

        // Cập nhật nội dung quiz theo ngôn ngữ
        function updateQuizContent() {
            const quizSetup = document.getElementById('quizSetup');
            if (quizSetup.style.display !== 'none') {
                quizSetup.querySelector('h2').textContent = translations[currentLanguage].quizSetupTitle;
                quizSetup.querySelector('label').textContent = translations[currentLanguage].questionCountLabel;
                document.getElementById('startQuiz').textContent = translations[currentLanguage].startQuiz;
            }
            
            if (document.getElementById('quizArea').style.display !== 'none') {
                document.getElementById('prevQuestion').textContent = translations[currentLanguage].prevQuestion;
                document.getElementById('nextQuestion').textContent = translations[currentLanguage].nextQuestion;
                document.getElementById('submitQuiz').textContent = translations[currentLanguage].submitQuiz;
                
                // Cập nhật câu hỏi hiện tại
                displayQuestion(currentQuestionIndex);
            }
        }

        // Hiển thị câu hỏi
        function displayQuestion(index) {
            if (currentQuestions.length === 0) return;
            
            const question = currentQuestions[index];
            const questionNumber = document.getElementById('questionNumber');
            const questionText = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            const feedback = document.getElementById('feedback');
            const memoryTip = document.getElementById('memoryTip');
            
            // Cập nhật số câu hỏi
            questionNumber.textContent = `${currentLanguage === 'vi' ? 'Câu hỏi' : 'Question'} ${index + 1}/${currentQuestions.length}`;
            
            // Hiển thị câu hỏi
            questionText.textContent = question.question;
            
            // Xóa các lựa chọn cũ
            optionsContainer.innerHTML = '';
            
            // Hiển thị các lựa chọn
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = `${String.fromCharCode(65 + i)}. ${option}`;
                optionElement.dataset.index = i;
                
                optionElement.addEventListener('click', () => {
                    if (quizStarted && !userAnswers[index].answered) {
                        selectOption(i, index);
                    }
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Ẩn phản hồi và mẹo ghi nhớ
            feedback.style.display = 'none';
            memoryTip.style.display = 'none';
            
            // Nếu đã trả lời câu hỏi này, hiển thị kết quả
            if (userAnswers[index].answered) {
                showAnswerFeedback(index);
            }
            
            // Cập nhật nút điều hướng
            updateNavigationButtons();
            
            // Cập nhật thanh tiến trình
            updateProgressBar();
        }

        // Chọn một lựa chọn
        function selectOption(optionIndex, questionIndex) {
            const question = currentQuestions[questionIndex];
            const options = document.querySelectorAll('.option');
            
            // Đánh dấu lựa chọn của người dùng
            userAnswers[questionIndex] = {
                selected: optionIndex,
                answered: true,
                correct: optionIndex === question.correctAnswer
            };
            
            // Hiển thị phản hồi
            showAnswerFeedback(questionIndex);
            
            // Cập nhật nút điều hướng
            updateNavigationButtons();
        }

        // Hiển thị phản hồi cho câu trả lời
        function showAnswerFeedback(questionIndex) {
            const question = currentQuestions[questionIndex];
            const userAnswer = userAnswers[questionIndex];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const memoryTip = document.getElementById('memoryTip');
            
            // Đánh dấu các lựa chọn
            options.forEach((option, i) => {
                option.classList.remove('selected', 'correct', 'incorrect');
                
                if (i === userAnswer.selected) {
                    option.classList.add('selected');
                }
                
                if (i === question.correctAnswer) {
                    option.classList.add('correct');
                } else if (i === userAnswer.selected && !userAnswer.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            // Hiển thị phản hồi
            feedback.textContent = userAnswer.correct ? 
                `${translations[currentLanguage].correctFeedback} ${question.explanation}` : 
                `${translations[currentLanguage].incorrectFeedback} ${question.explanation}`;
            
            feedback.className = `feedback ${userAnswer.correct ? 'correct' : 'incorrect'}`;
            feedback.style.display = 'block';
            
            // Hiển thị mẹo ghi nhớ nếu trả lời sai
            if (!userAnswer.correct && question.memoryTip) {
                memoryTip.innerHTML = `<strong>${translations[currentLanguage].memoryTipTitle}</strong> ${question.memoryTip}`;
                memoryTip.style.display = 'block';
            } else {
                memoryTip.style.display = 'none';
            }
        }

        // Cập nhật nút điều hướng
        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevQuestion');
            const nextButton = document.getElementById('nextQuestion');
            const submitButton = document.getElementById('submitQuiz');
            
            // Nút Câu trước
            prevButton.disabled = currentQuestionIndex === 0;
            
            // Nút Câu tiếp theo
            if (currentQuestionIndex === currentQuestions.length - 1) {
                nextButton.style.display = 'none';
                submitButton.style.display = 'inline-block';
            } else {
                nextButton.style.display = 'inline-block';
                submitButton.style.display = 'inline-block';
            }
            
            // Kiểm tra xem đã trả lời hết tất cả câu hỏi chưa
            const allAnswered = userAnswers.every(answer => answer.answered);
            if (allAnswered) {
                submitButton.disabled = false;
            }
        }

        // Cập nhật thanh tiến trình
        function updateProgressBar() {
            const progressBar = document.getElementById('quizProgress');
            const answeredCount = userAnswers.filter(answer => answer.answered).length;
            const progress = (answeredCount / currentQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Bắt đầu bài quiz
        function startQuiz() {
            questionCount = parseInt(document.getElementById('questionCount').value) || 10;
            
            // Tạo danh sách câu hỏi ngẫu nhiên
            currentQuestions = getRandomQuestions(questionCount);
            
            // Khởi tạo mảng câu trả lời của người dùng
            userAnswers = Array(questionCount).fill().map(() => ({
                selected: -1,
                answered: false,
                correct: false
            }));
            
            // Đặt lại chỉ số câu hỏi hiện tại
            currentQuestionIndex = 0;
            quizStarted = true;
            
            // Hiển thị khu vực quiz
            document.getElementById('quizSetup').style.display = 'none';
            document.getElementById('quizArea').style.display = 'block';
            document.getElementById('resultArea').style.display = 'none';
            
            // Hiển thị câu hỏi đầu tiên
            displayQuestion(currentQuestionIndex);
        }

        // Lấy câu hỏi ngẫu nhiên
        function getRandomQuestions(count) {
            // Tạo một bản sao của ngân hàng câu hỏi
            const shuffled = [...questionBank];
            
            // Xáo trộn câu hỏi
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            
            // Xáo trộn các lựa chọn cho mỗi câu hỏi
            shuffled.slice(0, count).forEach(question => {
                // Tạo mảng các chỉ số lựa chọn
                const indices = question.options.map((_, index) => index);
                
                // Xáo trộn các chỉ số
                for (let i = indices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [indices[i], indices[j]] = [indices[j], indices[i]];
                }
                
                // Tạo các lựa chọn mới
                const newOptions = indices.map(i => question.options[i]);
                
                // Tìm vị trí của đáp án đúng trong mảng mới
                const newCorrectAnswer = indices.indexOf(question.correctAnswer);
                
                // Cập nhật câu hỏi
                question.options = newOptions;
                question.correctAnswer = newCorrectAnswer;
            });
            
            return shuffled.slice(0, count);
        }

        // Chuyển đến câu hỏi tiếp theo
        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        // Chuyển đến câu hỏi trước đó
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }

        // Nộp bài
        function submitQuiz() {
            // Đánh dấu các câu chưa trả lời là sai
            userAnswers.forEach((answer, index) => {
                if (!answer.answered) {
                    userAnswers[index] = {
                        selected: -1,
                        answered: true,
                        correct: false
                    };
                }
            });
            
            // Hiển thị kết quả
            displayResults();
        }

        // Hiển thị kết quả
        function displayResults() {
            // Ẩn khu vực quiz
            document.getElementById('quizArea').style.display = 'none';
            document.getElementById('resultArea').style.display = 'block';
            
            // Tính điểm
            const correctCount = userAnswers.filter(answer => answer.correct).length;
            const scoreElement = document.getElementById('finalScore');
            scoreElement.textContent = `${correctCount}/${userAnswers.length}`;
            
            // Hiển thị chi tiết kết quả
            const resultDetails = document.getElementById('resultDetails');
            resultDetails.innerHTML = '';
            
            currentQuestions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const resultItem = document.createElement('div');
                resultItem.className = `result-item ${userAnswer.correct ? 'correct' : 'incorrect'}`;
                
                let userAnswerText;
                if (userAnswer.selected === -1) {
                    userAnswerText = translations[currentLanguage].unanswered;
                } else {
                    userAnswerText = `${String.fromCharCode(65 + userAnswer.selected)}. ${question.options[userAnswer.selected]}`;
                }
                
                const correctAnswerText = `${String.fromCharCode(65 + question.correctAnswer)}. ${question.options[question.correctAnswer]}`;
                
                resultItem.innerHTML = `
                    <div class="result-question">${index + 1}. ${question.question}</div>
                    <div class="result-answer"><strong>${currentLanguage === 'vi' ? 'Câu trả lời của bạn:' : 'Your answer:'}</strong> ${userAnswerText}</div>
                    <div class="result-answer"><strong>${currentLanguage === 'vi' ? 'Đáp án đúng:' : 'Correct answer:'}</strong> ${correctAnswerText}</div>
                    <div class="result-explanation">${question.explanation}</div>
                    ${!userAnswer.correct && question.memoryTip ? `<div class="memory-tip">${translations[currentLanguage].memoryTipTitle} ${question.memoryTip}</div>` : ''}
                `;
                
                resultDetails.appendChild(resultItem);
            });
        }

        // Làm bài quiz mới
        function restartQuiz() {
            document.getElementById('quizSetup').style.display = 'block';
            document.getElementById('quizArea').style.display = 'none';
            document.getElementById('resultArea').style.display = 'none';
            quizStarted = false;
        }

        // Khởi tạo sự kiện
        document.addEventListener('DOMContentLoaded', function() {
            // Sự kiện cho các tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Xóa lớp active từ tất cả các tab và nội dung tab
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Thêm lớp active cho tab được chọn
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab).classList.add('active');
                    
                    // Cập nhật nội dung nếu cần
                    if (this.dataset.tab === 'quiz') {
                        updateQuizContent();
                    }
                });
            });
            
            // Sự kiện cho nút dịch
            document.getElementById('translateBtn').addEventListener('click', translatePage);
            
            // Sự kiện cho nút bắt đầu quiz
            document.getElementById('startQuiz').addEventListener('click', startQuiz);
            
            // Sự kiện cho nút điều hướng
            document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
            document.getElementById('nextQuestion').addEventListener('click', nextQuestion);
            document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
            
            // Sự kiện cho nút làm bài mới
            document.getElementById('restartQuiz').addEventListener('click', restartQuiz);
        });
    </script>
</body>
</html>
